services:
  ${_appname_}:
    cap_add:
      - NET_ADMIN
    container_name: ${${_APPNAME_}_CONTAINER_NAME}
    devices:
      - /dev/net/tun
    environment:
      - FIREWALL_DEBUG=${${_APPNAME_}_ENVIRONMENT_FIREWALL_DEBUG}
      - FIREWALL_INPUT_PORTS=${${_APPNAME_}_ENVIRONMENT_FIREWALL_INPUT_PORTS}
      - FIREWALL_OUTBOUND_SUBNETS=${${_APPNAME_}_ENVIRONMENT_FIREWALL_OUTBOUND_SUBNETS}
      - FIREWALL_VPN_INPUT_PORTS=${${_APPNAME_}_ENVIRONMENT_FIREWALL_VPN_INPUT_PORTS}
      - FREE_ONLY=${${_APPNAME_}_ENVIRONMENT_FREE_ONLY}
      - HTTPPROXY=${${_APPNAME_}_ENVIRONMENT_HTTPPROXY}
      - HTTPPROXY_LOG=${${_APPNAME_}_ENVIRONMENT_HTTPPROXY_LOG}
      - HTTPPROXY_PASSWORD=${${_APPNAME_}_ENVIRONMENT_HTTPPROXY_PASSWORD}
      - HTTPPROXY_STEALTH=${${_APPNAME_}_ENVIRONMENT_HTTPPROXY_STEALTH}
      - HTTPPROXY_USER=${${_APPNAME_}_ENVIRONMENT_HTTPPROXY_USER}
      - HTTP_CONTROL_SERVER_LOG=${${_APPNAME_}_ENVIRONMENT_HTTP_CONTROL_SERVER_LOG}
      - ISP=${${_APPNAME_}_ENVIRONMENT_ISP}
      - OPENVPN_CUSTOM_CONFIG=${${_APPNAME_}_ENVIRONMENT_OPENVPN_CUSTOM_CONFIG}
      - OPENVPN_PASSWORD=${${_APPNAME_}_ENVIRONMENT_OPENVPN_PASSWORD}
      - OPENVPN_USER=${${_APPNAME_}_ENVIRONMENT_OPENVPN_USER}
      - OWNED_ONLY=${${_APPNAME_}_ENVIRONMENT_OWNED_ONLY}
      - PREMIUM_ONLY=${${_APPNAME_}_ENVIRONMENT_PREMIUM_ONLY}
      - PRIVATE_INTERNET_ACCESS_OPENVPN_ENCRYPTION_PRESET=${${_APPNAME_}_ENVIRONMENT_PRIVATE_INTERNET_ACCESS_OPENVPN_ENCRYPTION_PRESET}
      - PUBLICIP_FILE=${${_APPNAME_}_ENVIRONMENT_PUBLICIP_FILE}
      - PUBLICIP_PERIOD=${${_APPNAME_}_ENVIRONMENT_PUBLICIP_PERIOD}
      - SERVER_CITIES=${${_APPNAME_}_ENVIRONMENT_SERVER_CITIES}
      - SERVER_COUNTRIES=${${_APPNAME_}_ENVIRONMENT_SERVER_COUNTRIES}
      - SERVER_HOSTNAMES=${${_APPNAME_}_ENVIRONMENT_SERVER_HOSTNAMES}
      - SERVER_NAMES=${${_APPNAME_}_ENVIRONMENT_SERVER_NAMES}
      - SERVER_REGIONS=${${_APPNAME_}_ENVIRONMENT_SERVER_REGIONS}
      - SHADOWSOCKS=${${_APPNAME_}_ENVIRONMENT_SHADOWSOCKS}
      - SHADOWSOCKS_CIPHER=${${_APPNAME_}_ENVIRONMENT_SHADOWSOCKS_CIPHER}
      - SHADOWSOCKS_LOG=${${_APPNAME_}_ENVIRONMENT_SHADOWSOCKS_LOG}
      - SHADOWSOCKS_PASSWORD=${${_APPNAME_}_ENVIRONMENT_SHADOWSOCKS_PASSWORD}
      - TZ=${TZ}
      - UPDATER_MIN_RATIO=${${_APPNAME_}_ENVIRONMENT_UPDATER_MIN_RATIO}
      - UPDATER_PERIOD=${${_APPNAME_}_ENVIRONMENT_UPDATER_PERIOD}
      - UPDATER_VPN_SERVICE_PROVIDERS=${${_APPNAME_}_ENVIRONMENT_UPDATER_VPN_SERVICE_PROVIDERS}
      - VERSION_INFORMATION=${${_APPNAME_}_ENVIRONMENT_VERSION_INFORMATION}
      - VPN_ENDPOINT_IP=${${_APPNAME_}_ENVIRONMENT_VPN_ENDPOINT_IP}
      - VPN_ENDPOINT_PORT=${${_APPNAME_}_ENVIRONMENT_VPN_ENDPOINT_PORT}
      - VPN_INTERFACE=${${_APPNAME_}_ENVIRONMENT_VPN_INTERFACE}
      - VPN_PORT_FORWARDING=${${_APPNAME_}_ENVIRONMENT_VPN_PORT_FORWARDING}
      - VPN_PORT_FORWARDING_STATUS_FILE=${${_APPNAME_}_ENVIRONMENT_VPN_PORT_FORWARDING_STATUS_FILE}
      - VPN_SERVICE_PROVIDER=${${_APPNAME_}_ENVIRONMENT_VPN_SERVICE_PROVIDER}
      - VPN_TYPE=${${_APPNAME_}_ENVIRONMENT_VPN_TYPE}
      - WIREGUARD_ADDRESSES=${${_APPNAME_}_ENVIRONMENT_WIREGUARD_ADDRESSES}
      - WIREGUARD_ALLOWED_IPS=${${_APPNAME_}_ENVIRONMENT_WIREGUARD_ALLOWED_IPS}
      - WIREGUARD_IMPLEMENTATION=${${_APPNAME_}_ENVIRONMENT_WIREGUARD_IMPLEMENTATION}
      - WIREGUARD_MTU=${${_APPNAME_}_ENVIRONMENT_WIREGUARD_MTU}
      - WIREGUARD_PRESHARED_KEY=${${_APPNAME_}_ENVIRONMENT_WIREGUARD_PRESHARED_KEY}
      - WIREGUARD_PRIVATE_KEY=${${_APPNAME_}_ENVIRONMENT_WIREGUARD_PRIVATE_KEY}
      - WIREGUARD_PUBLIC_KEY=${${_APPNAME_}_ENVIRONMENT_WIREGUARD_PUBLIC_KEY}
    restart: ${${_APPNAME_}_RESTART}
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_VOLUME_CONFIG}/${_appname_}:/gluetun
      - ${DOCKER_VOLUME_STORAGE}:/storage

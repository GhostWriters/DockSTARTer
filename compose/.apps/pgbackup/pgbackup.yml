---
services:
  pgbackup:
    container_name: pgbackup
    environment:
      - BACKUP_KEEP_DAYS=${PGBACKUP_ENVIRONMENT_KEEP_DAYS}
      - BACKUP_KEEP_MONTHS=${PGBACKUP_ENVIRONMENT_KEEP_MONTHS}
      - BACKUP_KEEP_WEEKS=${PGBACKUP_ENVIRONMENT_KEEP_WEEKS}
      - POSTGRES_DB=${PGBACKUP_ENVIRONMENT_POSTGRES_DB}
      - POSTGRES_EXTRA_OPTS=${PGBACKUP_ENVIRONMENT_POSTGRES_EXTRA_OPTS}
      - POSTGRES_HOST=${PGBACKUP_ENVIRONMENT_POSTGRES_HOST}
      - POSTGRES_PASSWORD=${PGBACKUP_ENVIRONMENT_POSTGRES_PASSWORD}
      - POSTGRES_USER=${PGBACKUP_ENVIRONMENT_POSTGRES_USER}
      - SCHEDULE=${PGBACKUP_ENVIRONMENT_SCHEDULE}
      - TZ=${TZ}
    restart: ${PGBACKUP_RESTART}
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_VOLUME_STORAGE}/backups/postgres:/backups
      - ${DOCKER_VOLUME_STORAGE}:/storage
